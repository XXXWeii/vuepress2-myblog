{"version":3,"file":"queryHistory-0b48a016.js","sources":["../../src/client/components/SearchLoading.ts","../../src/client/components/icons.ts","../../src/client/define.ts","../../src/client/composables/queryHistory.ts"],"sourcesContent":["import { type FunctionalComponent, type VNode, h } from \"vue\";\n\nconst LoadingIcon: FunctionalComponent = (): VNode =>\n  h(\n    \"svg\",\n    {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: \"32\",\n      height: \"32\",\n      preserveAspectRatio: \"xMidYMid\",\n      viewBox: \"0 0 100 100\",\n    },\n    [\n      h(\n        \"circle\",\n        { cx: \"28\", cy: \"75\", r: \"11\", fill: \"currentColor\" },\n        h(\"animate\", {\n          attributeName: \"fill-opacity\",\n          begin: \"0s\",\n          dur: \"1s\",\n          keyTimes: \"0;0.2;1\",\n          repeatCount: \"indefinite\",\n          values: \"0;1;1\",\n        })\n      ),\n      h(\n        \"path\",\n        {\n          fill: \"none\",\n          stroke: \"#88baf0\",\n          \"stroke-width\": \"10\",\n          d: \"M28 47a28 28 0 0 1 28 28\",\n        },\n        h(\"animate\", {\n          attributeName: \"stroke-opacity\",\n          begin: \"0.1s\",\n          dur: \"1s\",\n          keyTimes: \"0;0.2;1\",\n          repeatCount: \"indefinite\",\n          values: \"0;1;1\",\n        })\n      ),\n      h(\n        \"path\",\n        {\n          fill: \"none\",\n          stroke: \"#88baf0\",\n          \"stroke-width\": \"10\",\n          d: \"M28 25a50 50 0 0 1 50 50\",\n        },\n        h(\"animate\", {\n          attributeName: \"stroke-opacity\",\n          begin: \"0.2s\",\n          dur: \"1s\",\n          keyTimes: \"0;0.2;1\",\n          repeatCount: \"indefinite\",\n          values: \"0;1;1\",\n        })\n      ),\n    ]\n  );\n\nLoadingIcon.displayName = \"LoadingIcon\";\n\nexport const SearchLoading: FunctionalComponent<{ hint: string }> = ({\n  hint,\n}) => h(\"div\", { class: \"search-pro-result loading\" }, [h(LoadingIcon), hint]);\n\nSearchLoading.displayName = \"SearchLoading\";\n","import { type FunctionalComponent, h } from \"vue\";\nimport { IconBase } from \"vuepress-shared/client\";\n\nexport const CloseIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"close\" }, () =>\n    h(\"path\", {\n      d: \"M507.168 473.232 716.48 263.936a16 16 0 0 1 22.624 0l11.312 11.312a16 16 0 0 1 0 22.624L541.12 507.168 750.4 716.48a16 16 0 0 1 0 22.624l-11.312 11.312a16 16 0 0 1-22.624 0L507.168 541.12 297.872 750.4a16 16 0 0 1-22.624 0l-11.312-11.312a16 16 0 0 1 0-22.624l209.296-209.312-209.296-209.296a16 16 0 0 1 0-22.624l11.312-11.312a16 16 0 0 1 22.624 0l209.296 209.296z\",\n    })\n  );\n\nCloseIcon.displayName = \"CloseIcon\";\n\nexport const HeadingIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"heading\" }, () =>\n    h(\"path\", {\n      d: \"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z\",\n    })\n  );\n\nHeadingIcon.displayName = \"HeadingIcon\";\n\nexport const HeartIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"heart\" }, () =>\n    h(\"path\", {\n      d: \"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z\",\n    })\n  );\n\nHeartIcon.displayName = \"HeartIcon\";\n\nexport const HistoryIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"history\" }, () =>\n    h(\"path\", {\n      d: \"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z\",\n    })\n  );\n\nHistoryIcon.displayName = \"HistoryIcon\";\n\nexport const TitleIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"title\" }, () =>\n    h(\"path\", {\n      d: \"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z\",\n    })\n  );\n\nTitleIcon.displayName = \"TitleIcon\";\n\nexport const SearchIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"search\" }, () =>\n    h(\"path\", {\n      d: \"M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28\",\n    })\n  );\n\nSearchIcon.displayName = \"SearchIcon\";\n","import {\n  type SearchProCustomFieldFormatter,\n  type SearchProHotKeyOptions,\n  type SearchProLocaleConfig,\n} from \"../shared/index.js\";\n\ntype SearchProClientCustomFiledConfig = Record<\n  string,\n  SearchProCustomFieldFormatter\n>;\n\ndeclare const SEARCH_PRO_CUSTOM_FIELDS: SearchProClientCustomFiledConfig;\ndeclare const SEARCH_PRO_OPTIONS: {\n  delay: number;\n  queryHistoryCount: number;\n  resultHistoryCount: number;\n  hotKeys: SearchProHotKeyOptions[];\n  worker: string;\n};\ndeclare const SEARCH_PRO_LOCALES: SearchProLocaleConfig;\n\nexport const searchProOptions = SEARCH_PRO_OPTIONS;\n\nexport const searchProClientCustomFiledConfig = SEARCH_PRO_CUSTOM_FIELDS;\nexport const searchProHotKeys = searchProOptions.hotKeys;\nexport const searchProLocales = SEARCH_PRO_LOCALES;\n","import { useLocalStorage } from \"@vueuse/core\";\nimport { type Ref } from \"vue\";\n\nimport { searchProOptions } from \"../define.js\";\n\nconst SEARCH_PRO_QUERY_STORAGE = \"search-pro-query-history\";\n\nexport interface SearchQueryHistory {\n  enabled: boolean;\n  queryHistory: Ref<string[]>;\n  addQueryHistory: (item: string) => void;\n  removeQueryHistory: (index: number) => void;\n}\n\nconst searchProQueryStorage = useLocalStorage<string[]>(\n  SEARCH_PRO_QUERY_STORAGE,\n  []\n);\n\nexport const useSearchQueryHistory = (): SearchQueryHistory => {\n  const { queryHistoryCount } = searchProOptions;\n  const enabled = queryHistoryCount > 0;\n\n  const addQueryHistory = (item: string): void => {\n    if (enabled)\n      if (searchProQueryStorage.value.length < queryHistoryCount)\n        searchProQueryStorage.value = Array.from(\n          new Set([item, ...searchProQueryStorage.value])\n        );\n      else\n        searchProQueryStorage.value = Array.from(\n          new Set([\n            item,\n            ...searchProQueryStorage.value.slice(0, queryHistoryCount - 1),\n          ])\n        );\n  };\n\n  const removeQueryHistory = (index: number): void => {\n    searchProQueryStorage.value = [\n      ...searchProQueryStorage.value.slice(0, index),\n      ...searchProQueryStorage.value.slice(index + 1),\n    ];\n  };\n\n  return {\n    enabled,\n    queryHistory: searchProQueryStorage,\n    addQueryHistory,\n    removeQueryHistory,\n  };\n};\n"],"names":["LoadingIcon","h","SearchLoading","hint","CloseIcon","IconBase","HeadingIcon","HeartIcon","HistoryIcon","TitleIcon","SearchIcon","searchProOptions","searchProClientCustomFiledConfig","searchProHotKeys","searchProLocales","SEARCH_PRO_QUERY_STORAGE","searchProQueryStorage","useLocalStorage","useSearchQueryHistory","queryHistoryCount","enabled","item","index"],"mappings":"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"}
import{usePageFrontmatter as p,usePageData as k,useSiteData as v}from"@vuepress/client";import{defineComponent as f,ref as h,computed as M,onMounted as w,watch as d,h as s,nextTick as y}from"vue";import"artalk/dist/Artalk.css";import"../styles/artalk.scss";const a=COMMENT_OPTIONS,P=!!a.server;var T=f({name:"Artalk",props:{darkmode:Boolean},setup:r=>{const m=p(),l=k(),i=v(),u=h();let e=null;const n=M(()=>{if(!P)return!1;const t=a.comment!==!1,o=m.value.comment;return!!o||t!==!1&&o!==!1}),c=async()=>{n.value&&await Promise.all([import("artalk"),new Promise(t=>{setTimeout(()=>{y().then(t)},a.delay)})]).then(([{default:t}])=>{const o=t;try{e=new o({useBackendConf:!1,site:i.value.title,pageTitle:l.value.title,...a,el:u.value,pageKey:l.value.path,darkMode:r.darkmode}),a.useBackendConf&&e.on("conf-loaded",()=>{e.setDarkMode(r.darkmode)})}catch{}})};return w(()=>{d(()=>[n.value,l.value.path],async()=>{e==null||e.destroy(),await c()},{immediate:!0}),d(()=>r.darkmode,t=>{e==null||e.setDarkMode(t)})}),()=>n.value?s("div",{class:"artalk-wrapper"},s("div",{ref:u})):null}});export{T as default};
//# sourceMappingURL=Artalk.js.map
